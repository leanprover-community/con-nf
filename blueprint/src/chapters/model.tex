\section{Raising strong supports}
In this section, let \( \gamma < \beta \) be proper type indices strictly below the current level \( \alpha \).
\begin{proposition}
  \uses{prop:exists_strong}
  \label{prop:raiseStrong_length}
  Let \( T \) be a \( \gamma \)-support, and let \( U \) be the strong support generated by \( T^\beta \).
  If \( A \) is a path such that \( \im U_A^\NearLitter \) is nonempty, then \( A \) has length at least 2.
\end{proposition}
\begin{proof}
  Let \( N \in \im U_A^\NearLitter \).
  Either \( A \) is of the form \( B^\beta \) for \( B : \gamma \tpath \bot \) and \( N \in \im T_B^\NearLitter \), in which case \( B \) clearly has length at least 2 as \( \gamma \) is a proper type index, or \( N \in \im V_B^\NearLitter \) where \( A = B^\beta \) and \( B : \delta \tpath \bot \), and \( V \) supports some \( \delta \)-set.
  But we cannot have \( \delta = \bot \), because \( \bot \)-supports that support some \( \delta \)-set cannot contain near-litters, so in this other case \( A \) also has length at least 2.
\end{proof}
\begin{proposition}
  \uses{prop:exists_strong}
  \label{prop:raiseStrong}
  Let \( T \) be a \( \gamma \)-support, and let \( U \) be the strong support generated by \( T^\beta \).
  Then \( U^\alpha \) is strong.
\end{proposition}
\begin{proof}
  \uses{prop:raiseStrong_length}
  The interference condition is clear.

  First we show that proofs that \( A^\alpha \)-inflexibility for litters that appear in \( U^\alpha \) correspond to proofs of \( A \)-inflexibility.
  Clearly if \( L \) is \( A^\alpha \)-flexible then \( L \) is \( A \)-flexible.
  Instead, let \( I = (\delta, \varepsilon, \zeta, A) \) be an inflexible \( \alpha \)-path and \( t : \Tang_\varepsilon \) such that there is a near-litter \( N \in \im (U^\alpha)^\NearLitter_{{A_\zeta}_\bot} \) with \( N^\circ = f_{\varepsilon,\zeta}(t) \).
  Suppose that \( A \) is the empty path, so \( \delta = \alpha \).
  Then \( (U^\alpha)^\NearLitter_{{A_\zeta}_\bot} = (U^\alpha)^\NearLitter_{\zeta_\bot} \) is nonempty, so \( \zeta = \beta \).
  This shows that \( \im (U^\alpha)^\NearLitter_{\beta_\bot} = \im U^\NearLitter_\bot \) is nonempty, contradicting \cref{prop:raiseStrong_length}.
  So \( A \) is nonempty, and is of the form \( B^\alpha \) for \( B : \beta \tpath \delta \).
  So \( (\delta,\varepsilon,\zeta,B) \) is an inflexible \( \beta \)-path for \( N^\circ \).

  The expected conclusion then follows directly from the fact that \( U \) is strong.
\end{proof}
\begin{proposition}
  \uses{prop:exists_strong}
  \label{prop:raiseRaise_strong}
  Let \( S \) be a strong \( \alpha \)-support and let \( T \) be a \( \gamma \)-support.
  Let \( U \) be the strong support generated by \( T^\beta \), and let \( V \) be the support whose image is precisely those atoms in the interference of \( S_\beta \) and \( U \).
  Let \( \rho \) be a \( \beta \)-allowable permutation that fixes \( S_\beta \).
  Then \( S + (\rho(U + V))^\alpha \) is strong.
\end{proposition}
\begin{proof}
  \uses{prop:Strong.smul,prop:raiseStrong}
  Follows directly from \cref{prop:Strong.smul,prop:raiseStrong}.
\end{proof}
\begin{proposition}
  \label{prop:combineStrong}
  Let \( S \) be a strong \( \alpha \)-support.
  Let \( U \) be a strong \( \beta \)-support with the property that if \( A \) is a path such that \( \im U_A^\NearLitter \) is nonempty, then \( A \) has length at least 2.
  Then for every \( \beta \)-allowable \( \rho \) that fixes \( S_\beta \), we have \( \spec(S + U^\alpha) = \spec(S + (\rho(U))^\alpha) \).
\end{proposition}
\begin{proof}
  Appeal to \cref{prop:spec_eq_spec_iff}.
  First, note that \( (i, a) \in (S + (\rho(U))^\alpha)_A^\Atom \) if and only if \( (i, a) \in S \) or \( A = B^\alpha \) and \( (i, a) \in \rho(U)_B^\Atom \).
  Thus,
  \begin{align*}
    (i, a_1) \in (S + U^\alpha)_A^\Atom &\to \exists a_2,\, (i, a_2) \in (S + (\rho(U))^\alpha)_A^\Atom \\
    &\quad\wedge [(\exists B,\, A = B^\alpha \wedge \rho_B(a_1) = a_2) \vee ((\forall B,\, A \neq B^\alpha) \wedge a_1 = a_2)]
  \end{align*}
  and the same holds for the other direction\footnote{We can prove the other direction easily from this by substituting \( \rho(U) \) and \( \rho^{-1} \).} and for near-litters.

  The coimage condition is clear.
  Suppose that \( (i, a_1) \in (S + U^\alpha)_A^\Atom \) and \( (i, a_2) \in (S + (\rho(U))^\alpha)_A^\Atom \).
  Then by coinjectivity we can apply the above result, giving that either there is \( B \) such that \( A = B^\alpha \) and \( \rho_B(a_1) = a_2 \), or there is no such \( B \), and \( a_1 = a_2 \).
  In either case, the result is easy to show.

  The result for litters follows from the fact that the condition on \( U \) implies that proofs of inflexiblity of litters in \( U \) correspond bijectively to proofs of inflexibility of litters in \( U^\alpha \).\footnote{TODO: Probably want more details when we get here.}
\end{proof}
\begin{proposition}
  \uses{def:Strong}
  \label{prop:exists_allowable_of_fixes}
  Let \( S \) be a strong \( \alpha \)-support and let \( T \) be a \( \gamma \)-support.
  Let \( \rho \) be a \( \beta \)-allowable permutation that fixes \( S_\beta \).
  Then there is an \( \alpha \)-allowable permutation \( \rho' \) such that
  \[ \rho'(S) = S;\quad (\rho'_\beta)_\gamma(T) = \rho_\gamma(T) \]
\end{proposition}
\begin{proof}
  \uses{prop:exists_allowable_of_spec_eq_spec,prop:raiseRaise_strong,prop:raiseStrong_length,prop:combineStrong}
  Let \( U \) be the strong support generated by \( T^\beta \), and let \( V \) be the support whose image is precisely those atoms in the interference of \( S_\beta \) and \( U \).
  Then apply \cref{prop:exists_allowable_of_spec_eq_spec,prop:raiseRaise_strong,prop:raiseStrong_length,prop:combineStrong}.
\end{proof}

\section{Tangled type theory}
\begin{definition}[tangled membership]
  \uses{thm:model_construction}
  \label{def:TSet.mem}
  We define the membership relation \( \in^\alpha_\beta : \TSet_\beta \to \TSet_\alpha \to \Prop \) by
  \[ x \in^\alpha_\beta y \leftrightarrow U_\beta(x) \in U_\alpha(y)(\beta) \]
  Extensionality holds at all proper type indices by \cref{prop:Code.ext}.
  Also, for every \( \alpha \)-allowable \( \rho \), we have
  \[ \rho_\beta(x) \in^\alpha_\beta \rho(y) \leftrightarrow x \in^\alpha_\beta y \]
\end{definition}
\begin{definition}[symmetric]
  \uses{thm:model_construction}
  \label{def:Symmetric}
  Let \( \beta < \alpha \) be proper type indices.
  A set \( s : \TSet_\beta \) is called \emph{\( \alpha \)-symmetric} if there is some \( \alpha \)-support \( S \) such that if \( \rho \) is an \( \alpha \)-allowable permutation that fixes \( S \), then \( \rho \) fixes \( s \) setwise.
  Note that it suffices to prove that for all \( \rho \) that fix \( S \), \( s \subseteq \rho[s] \) (or alternatively, \( \rho[s] \subseteq s \)).
  Every small set is symmetric, since a support can be obtained by raising the types of chosen supports for elements of the set and then collating the results.
\end{definition}
\begin{proposition}
  \uses{def:Symmetric}
  \label{prop:TSet.of_symmetric}
  Let \( \beta < \alpha \) be proper type indices.
  Let \( s : \TSet_\beta \) be \( \alpha \)-symmetric.
  Then there is \( x : \TSet_\alpha \) such that
  \[ \forall y : \TSet_\beta,\, y \in_\beta^\alpha x \leftrightarrow y \in s \]
  Moreover, every \( x : \TSet_\alpha \) arises in this way; this is an induction principle for \( \TSet_\alpha \).
\end{proposition}
\begin{proof}
  If \( s \) is empty, the result follows directly from the definition of \( \TSet_\alpha \).
  Otherwise, consider the code \( (\beta, s) \).
  By \cref{def:Code.Represents}, there is exactly one code \( d \) such that \( c \looparrowright (\beta, s) \).
  Then \( c \) is a new t-set at level \( \alpha \), so is naturally an inhabitant of \( \TSet_\alpha \).
  Using the membership relation from \cref{prop:Code.ext}, the type-\( \beta \) members of \( c \) are precisely \( s \), as required.

  For the induction principle, we apply the above construction to the set
  \[ s = \{ y \mid y \in^\alpha_\beta x \} \]
  and use extensionality to deduce that the object constructed is exactly \( x \).
\end{proof}
\begin{proposition}[unions of singletons]
  \uses{thm:model_construction}
  \label{prop:singleton_union}
  Let \( \gamma < \beta < \alpha \) be proper type indices.
  Let \( s : \Set \TSet_\gamma \) be such that \( \singleton_\beta[s] \) is \( \alpha \)-symmetric.
  Then \( s \) is \( \beta \)-symmetric.
\end{proposition}
\begin{proof}
  \uses{prop:exists_allowable_of_fixes}
  Let \( S \) be an \( \alpha \)-support for \( \singleton_\beta[s] \), which without loss of generality is strong.
  We claim that the \( \alpha \)-symmetry of \( s \) is witnessed by \( S_\beta \).
  Let \( \rho \) be a \( \beta \)-allowable permutation such that \( \rho(S_\beta) = S_\beta \).
  Let \( x \in s \); it suffices by substituting \( \rho^{-1} \) to prove that \( \rho_\gamma(x) \in s \).
  As \( x : \TSet_\gamma \), there is a \( \gamma \)-support \( T \) for \( x \).
  By \cref{prop:exists_allowable_of_fixes}, there is an \( \alpha \)-allowable permutation \( \rho' \) such that
  \[ \rho'(S) = S;\quad (\rho'_\beta)_\gamma(T) = \rho_\gamma(T) \]
  Thus,
  \[ \rho'_\beta(\singleton_\beta[s]) = \singleton_\beta[s];\quad (\rho'_\beta)_\gamma(x) = \rho_\gamma(x) \]
  We thus have
  \begin{align*}
    x &\in s \\
    \singleton_\beta(x) &\in \singleton_\beta[s] \\
    \rho'_\beta(\singleton_\beta(x)) &\in \rho'_\beta(\singleton_\beta[s]) \\
    \rho'_\beta(\singleton_\beta(x)) &\in \singleton_\beta[s] \\
    \singleton_\beta((\rho'_\beta)_\gamma(x)) &\in \singleton_\beta[s] \\
    \singleton_\beta(\rho_\gamma(x)) &\in \singleton_\beta[s] \\
    \rho_\gamma(x) &\in s \\
  \end{align*}
\end{proof}
\begin{theorem}[consistency of tangled type theory]
  \uses{def:TSet.mem}
  \label{thm:ttt_consistent}
  Let \( \{ x \}_\beta \) be an abbreviation for \( \singleton_\beta(x) \), and let \( \langle x, y \rangle_{\gamma,\beta} \) be an abbreviation for \( \{ \{ x \}_\gamma, \{ x, y \}_\gamma \}_\beta \).
  Then, the following axioms hold for our model \( \TSet \) at all sequences of proper type indices \( \zeta < \varepsilon < \delta < \gamma < \beta < \alpha \).
  \begin{center}
    \begin{tabular}{llcl}
      \( - \) & extensionality & \( \forall x^\alpha,\, \forall y^\alpha,\, (\forall z^\beta,\, z \in x \leftrightarrow z \in y) \to x = y \) \\
      P1(a) & intersection & \( \forall x^\alpha y^\alpha,\, \exists z^\alpha,\, \forall w^\beta,\, w \in z \leftrightarrow (w \in x \wedge w \in y) \) \\
      P1(b) & complement & \( \forall x^\alpha,\, \exists z^\alpha,\, \forall w^\beta,\, w \in z \leftrightarrow w \notin x \) \\
      \( - \) & singleton & \( \forall x^\beta,\, \exists y^\alpha,\, \forall z^\beta,\, z \in y \leftrightarrow z = x \) \\
      P2 & singleton image & \( \forall x^\beta,\, \exists y^\alpha,\, \forall z^\varepsilon w^\varepsilon,\, \langle \{ z \}_\delta, \{ w \}_\delta \rangle_{\gamma,\beta} \in y \leftrightarrow \langle z, w \rangle_{\delta,\gamma} \in x \) \\
      P3 & insertion two & \( \forall x^\gamma,\, \exists y^\alpha,\, \forall z^\zeta w^\zeta t^\zeta,\, \langle \{ \{ z \}_\varepsilon \}_\delta, \langle w, t \rangle_{\varepsilon, \delta} \rangle_{\gamma,\beta} \in y \leftrightarrow \langle z, t \rangle_{\varepsilon,\delta} \in x \) \\
      P4 & insertion three & \( \forall x^\gamma,\, \exists y^\alpha,\, \forall z^\zeta w^\zeta t^\zeta,\, \langle \{ \{ z \}_\varepsilon \}_\delta, \langle w, t \rangle_{\varepsilon,\delta} \rangle_{\gamma,\beta} \in y \leftrightarrow \langle z, w \rangle_{\varepsilon,\delta} \in x \) \\
      P5 & cross product & \( \forall x^\gamma,\, \exists y^\alpha,\, \forall z^\beta,\, z \in y \leftrightarrow \exists w^\delta t^\delta,\, z = \langle w, t \rangle_{\gamma,\beta} \wedge t \in x \) \\
      P6 & type lowering & \( \forall x^\alpha,\, \exists y^\delta,\, \forall z^\varepsilon,\, z \in y \leftrightarrow \forall w^\delta,\, \langle w, \{ z \}_\delta \rangle_{\gamma,\beta} \in x \) \\
      P7 & converse & \( \forall x^\alpha,\, \exists y^\alpha,\, \forall z^\delta w^\delta,\, \langle z, w \rangle_{\gamma,\beta} \in y \leftrightarrow \langle w, z \rangle_{\gamma,\beta} \in x \) \\
      P8 & cardinal one & \( \exists x^\alpha,\, \forall y^\beta,\, y \in x \leftrightarrow \exists z^\gamma,\, \forall w,\, w \in y \leftrightarrow w = z \) \\
      P9 & subset & \( \exists x^\alpha,\, \forall y^\delta z^\delta,\, \langle y, z \rangle_{\gamma,\beta} \in x \leftrightarrow \forall w^\varepsilon,\, w \in y \to w \in z \)
    \end{tabular}
  \end{center}
\end{theorem}
\begin{proof}
  \uses{prop:Code.ext,prop:TSet.of_symmetric,prop:singleton_union}
  The axiom of extensionality was proven in \cref{prop:Code.ext}.
  All axioms except for the type lowering axiom can be easily proven using \cref{prop:TSet.of_symmetric}.
  For type lowering, consider the set
  \[ y' = \{ \{\{\{z^\varepsilon\}_\delta\}_\gamma\}_\beta \mid \forall w^\delta,\, \langle w, \{ z \}_\delta \rangle_{\gamma,\beta} \in x \} \]
  which exists by \cref{prop:TSet.of_symmetric}, and then apply \cref{prop:singleton_union} three times.
\end{proof}
